version: '3.8'

services:
  ground_station:
    image: gs_backend
    container_name: ground_station
    build:
      context: ./
      dockerfile: ground_station.dockerfile
    ports:
      - 8080:8080
    environment:
      RX_PORT: ${RX_PORT?Variable not set}
      TX_PORT: ${TX_PORT?Variable not set}
      RADIO_PORT: ${RADIO_PORT?Variable not set}
    devices:
      - "/dev/ttyUSB0:/dev/ttyUSB0"
      - "/dev/ttyUSB1:/dev/ttyUSB1"
      - "/dev/ttyUSB2:/dev/ttyUSB2"
    # command: tail -F anything
    volumes:
      -.:/ground_station
